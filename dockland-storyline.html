<!DOCTYPE html>
<html>
<head>
 <meta charset='utf-8' />
 <title>Dockland Storyline</title>
 <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"></script>
 
 <style>
   body { margin:0; padding:0; }
   #map { position:absolute; top:0; bottom:0; width:100%; }
 </style>
</head>
<body>
<style>
#map {
position: fixed;
width:75%;
}
    
.legend {
        background-color: #f4f4f4;
        border: #9ba1a1;
        border-radius: 3px;
        bottom: 30px;
        box-shadow:0 1px 2px rgb(150,159,158);
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        padding: 10px;
        position: fixed;
        left: 10px;
        z-index: 1;
        }

        .legend h4 {
        margin: 0 0 10px;
        }

        .legend div span {
        border-radius: 50%;
        display: inline-block;
        height: 10px;
        margin-right: 5px;
        width: 10px;
                }
#features {
width: 25%;
margin-left: 75%;
font-family: 'Calibri';
color: floralwhite;
overflow-y: scroll;
background-color: #000000;
}
section {
padding:  20px 20px; 
line-height: 25px;
border-bottom: 1px solid #ddd;
opacity: 0.25;
font-size: 14px;
}
section.active {
opacity: 1;
}
section:last-child {
border-bottom: none;
margin-bottom: 100px;
opacity: 1;
}
    
.marker {
  background-image: url('pin.png');
  background-size: cover;
  width: 14px;
  height: 20px;
  border-radius: 50%;
  cursor: pointer;
}   
    
.mapboxgl-popup {
    max-width: 400px;
    font: 12px/20px 'Calibri';
}
</style>
    
<div id='map'></div>
<div id='features'>
     <section id='INTRO' class='active'>
         <h2>REGENERATION OF THE LONDON DOCKLANDS</h2>
         <p> Building heights have been extracted from <a href="https://digimap.edina.ac.uk/webhelp/os/data_information/os_products/os_building_heights.htm" target="_blank"> Environment Agency LIDAR data</a> and easily downloaded from <a href="https://www.emu-analytics.com/products/datapacks" target="_blank"> Emu Analytics </a>. </p>
        <p>The base, land use data is from <a href="https://www.openstreetmap.org/#map=15/51.5617/-0.1051&layers=T" target="_blank"> OpenStreetMap</a>, and  <a href="https://www.openstreetmap.org/#map=15/51.5617/-0.1051&layers=T" target="_blank"> Geofabrik</a> allows you to download frequently updated shapefiles.</p>
	 <section id='Storyline'></section>    
	 <p> This storyline takes you through the events leading up to the decline of the area from the 18th century, through to the redevelopment of the docklands, and future development approved and under construction.</p> 
     </section>
     <section id='PreDevelopment' class='active'>
         <h3> Thriving Docklands (18th - 19th century) </h3>
         <p>Until the beginning of the 19th century, shipping was handled entirely within the Pool of London (the stretch of the River Thames between London Bridge and Limehouse). As trade and demand for ships continued to double from 1700 - 1770, and again from 1770 to 1795, the river was heavily burdened with congestion. Additionally, port industries developed for example, iron working, shipbuilding, cement ect., ship repairing  and numerous power stations and gas works. </p>
        <p>A series of enclosed dock systems were built on the north bank of the river including: West India Docks (1802), London Docks (1805), Royal Victoria Dock (1855) and Royal Albert Dock (1880) to relieve pressure. </p>
     </section>
     <section id='Declining'>
	     <h3>Decline of the Docks</h3>
         <p>Although suffering significant damage by the bombings in WWII, the docks experienced a period of resurgence in the 1950s, as part of the post-war rebuilding effort. </p>
         <p>Between 1960 and 1970, the use of larger vessels to accommodate 'containerisation' (intermodal containers i.e., between trucks and ships, making transportation of cargo more efficient) and other technological changes, rendered the docks redundant. The upstream docklands could not accomodate these much larger vessels, moving the shipping industry to deep-water ports such as Tilbury and Felixstowe.</p>
         <p>By 1980 all of London's docks were closed, leaving around 8 sq miles of land derelict and abandoned. These closures led to massive unemployment and social problems across East London. The are was left in dire need of re-development. </p>
     </section>
     <section id='LDDC'>
         <h3>London Docklands Development Corporation (1981)</h3>
         <p> For nearly 17 years between July 1981 and March 1998 the LDDC worked to secure the regeneration of the London Docklands. It was established by the Government under the Local Government, Planning and Land Act 1980. The 1980 Act requires an urban development corporation "to secure the regeneration of its area, by bringing land and buildings into effective use, encouraging the development of existing and new industry and commerce, creating an attractive environment and ensuring that housing and social facilities are available to encourage people to live and work in the area". The following are a few of the developments implemented under the LDDC.  </p>
    </section>
    <section id='EZ'>
         <h3>Enterprise Zone (1982 - 1992)</h3>
         <p>The Enterprise Zone was set up on the Isle of Dogs to attract new business investment. Companies that moved to the Enterprise Zone were entitled to 10 years rate free (tax breaks) and a fast track planning procedure. Many of the newspaper companies, moved from Central London to the Isle of Dogs in the 1980s.</p>
		 </section>
     <section id='DLR'>
         <h3> London Docklands Light Railway (DLR) opens (1987) </h3>
         <p>  Almost half the public sector cost of regenerating Docklands was devoted to transport infrastructure. Opened with just 15 stations and its first route, connecting Island Gardens with Tower Gateway and Stratford, helped transform the once-isolated Canary Wharf into a new financial centre. Additionally, there was an extension of the existing Jubilee Line to reach Canary Wharf. </p>
         
         <p> Formerly known as Crossrail, the Elizabeth line will provide crucial links to Heathrow Airport, the City, West End and the Thames Gateway. It will provide additional rail capacity to support 200,000 jobs on the Isle of Dogs. The scheme includes a new Canary Wharf station.</p>
     </section>
     <section id='Airport'>
         <h3>London City Airport (1987) </h3>
         <p>INSERT TEXT HERE.</p>
		 </section>
     <section id='CanaryWharf'>
         <h3>Canary Wharf (1991) </h3>
         <p>INSERT TEXT HERE. First companies move into Canary Wharf.
        The 5.9 million square feet of office and retail space are now leased. 28,000 people work in the whole of London Docklands (11/2000) and it is estimated that by 2005 Canary Wharf alone will have 100,000 workers. However, much of the office space in Canary Wharf remained empty until the late 1990s. The completion of the Jubilee Line in 2000 has certainly encouraged new investment in the area.</p>
		 </section>
     <section id='University'>
         <h3>University of East London (UEL) opens (1999) </h3>
         <p>INSERT TEXT HERE. Renowned for its sports offer and facilities, it is also one of the few London universities to provide on-campus accommodation. </p>
		 </section>
     <section id='Dome'>
         <h3>Millenium Dome (2000) </h3>
         <p>INSERT TEXT HERE.</p>
		 </section>
     <section id='ExCeL'>
         <h3>ExCeL London (2000) </h3>
         <p> The ExCeL Centre, located in the Royal Docks in East London, is expanding its exhibition and conference facilities to 1 million sq. ft., making it one of the largest centres in the UK, with a national and international draw, hosting c. 4 million people a year. It was later expanded for the 2012 Olympics. As part of the expansion, Urban Strategies  anticipates the physical, functional and economic growth of the East London region as a vibrant, mixed-use destination creating an attractive urban setting for ExCeL, capitalizing on its unique waterfront location while enhancing its competitive presence within a broader European context.</p>
		 </section>
    <section id='Silvertown'>
         <h3>Silvertown Quays (2001 - 2009)</h3>
         <p>The regeneration of Silvertown Quays, the last large site in the Royal Docks district of London, continues the effort to bring significant new development east of Canary Wharf and the Millennium Dome (o2). The 60-acre site won an international design competition hosted by the London Development Agency. The proposed network of streets and open spaces responded to the unique dockside location and provided the framework for a range of commercial (40,000m2) and residential (5,000 units) buildings along with water-based recreational facilities. The objective was to create a sustainable community that capitalised on recent investments in nearby regional transportation and open space infrastructure while employing the best environmental practices and job creation for the local community.</p>
		 </section>
     <section id='Emirates'>
         <h3>Emirates Air Line (2012)</h3>
         <p>Linking Royal Victoria Dock with North Greenwich, this cable car gives visitors spectacular views over the docks’ waterscape.</p>
		 </section>
     <section id='Housing'>
         <h3>Housing Developments</h3>
         <p> E.g LONDON CITY ISLAND, INSERT TEXT HERE</p>
		 </section>
     <section id='Industry'>
         <h3>Industry</h3>
         <p>INSERT TEXT HERE. remaining industry in the area </p>
		 </section>
    <section id='Shopping'>
        <h3> Retail Expansion </h3>
         <p> The shops, restaurants and leisure brands at Canary Wharf  INSERT TEXT HERE. eg. Cabot Place Shopping Centre </p>
		 </section>
    <section id='Park'>
         <h3>Open Spaces</h3>
         <p>Much of the existing open space from before the 1980s remains in the same location. However additional green space is visible throughout the area, especially between apartment blocks. The are before development was extremely polluted </p>
		 </section>
     <section id='Wood'>
         <h3>Woodwharf Regeneration</h3>
         <p>Canary Wharf’s new neighbourhood, Wood Wharf, will provide up to 3,600 new homes, 2 million sq ft of office space, 350,000 sq ft of retail space and over nine acres of public spaces, squares and parks. There will also be a GP surgery and a school. This is a key example of a mix of uses within a small space.</p>
		 </section>
     <section id='NorthQ'>
         <h3>North Quay Development (2020) </h3>
         <p>INSERT TEXT HERE.</p>
		 </section>
     <section id='Anything'>
         <h3> Future of the area</h3>
         <p> In under 30 years, Canary Wharf has transformed from an ambitious development at its infancy to one of the principal financial districts in the world, becoming the de facto city centre of London’s rising East. Development continues in the area, and land use will continue to evolve. </p>
		 </section>
   
    <section id='Storyline'>
    <h3> References</h3>
        <p>A London Inheritance (2018) ‘London Docklands - A 1976 Strategic Plan’. <a href= "https://alondoninheritance.com/london-history/london-docklands-a-1976-strategic-plan/" target="_blank"> link </a></p>
        <p> Baltic Quay (2009) London Docklands Timeline <a href= "https://www.balticquay.org.uk/about/32-2/" target="_blank"> link </a></p>
        <p> Hawkes, J. (2020) Aerial views of London: then and now – in pictures, the Guardian <a href= "http://www.theguardian.com/uk-news/2020/sep/18/aerial-changing-face-london-then-now-jason-hawkes-in-pictures " target="_blank"> link </a></p>  
        <p> LDDC (No date) About LDDC <a href= "http://www.lddc-history.org.uk/lddcachieve/index.html " target="_blank"> link </a></p>
        <p> London’s Royal Docks (no date) London’s Royal Docks History - Official Timeline <a href= "https://londonsroyaldocks.com/londons-royal-docks-history/" target="_blank"> link </a></p>     
        <p> Mellor, J. (2015) ‘In Pictures: The Evolution of London Docklands’ <a href= "https://www.thelondoneconomic.com/property/in-pictures-the-evolution-of-london-docklands-12850/" target="_blank"> link </a></p>
        <p> Noble, W. (2017) In Pictures: London City Airport, Then And Now <a href= "https://londonist.com/london/transport/in-pictures-30-years-of-london-city-airport" target="_blank"> link </a></p>
        <p> Oakley, M. (2013) Canary Wharf History  <a href= "https://www.eastlondonhistory.co.uk/london-docklands-canary-wharf/" target="_blank"> link </a></p>
        <p> Port of London (2020) History of the Port of London pre 1908 <a href= "http://www.pla.co.uk/Port-Trade/History-of-the-Port-of-London-pre-1908" target="_blank"> link </a></p>
        <p> Royal Docks (2018) A history of the Royal Docks <a href= "https://www.royaldocks.london/articles/a-history-of-the-royal-docks " target="_blank"> link </a></p>
        <p> Urban Strategies (2021) London Docklands <a href= "https://www.urbanstrategies.com/project/london-docklands/ " target="_blank"> link </a></p>
        
    </section>
    
</div>

    
    <div id="body" class="legend">
        <h4>Key</h4>
        <div><span style="background-color: #f7ae26"></span>Residential</div>
        <div><span style="background-color: #d3d00d"></span>Commercial</div>
        <div><span style="background-color: #ca7777"></span>Industrial</div>
        <div><span style="background-color: #68af50"></span>Open Spaces</div>
        <div><span style="background-color: #0f3cd2"></span>Retail</div>
        <div><span style="background-color: #6cefd2"></span>Shrub</div>

    </div>
    
<script>

    mapboxgl.accessToken = 'pk.eyJ1IjoiY2hyaXN0aW5hYm90cm9zIiwiYSI6ImNraG5teG82MDJ5NHIydGw2c2plaTdpamwifQ.BMkojxGHEaeIExJ9WreKKQ'; 
    
    // Load a new map in the 'map' HTML div
    const map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/christinabotros/ckorzrr5q2ql118p1au0y4wh9', 
    center: [0.005, 51.498], // starting position [lng, lat]
    zoom: 13.21, // starting zoom
    bearing: 13.6,
    pitch: 62
    });
    
    var first_popup = new mapboxgl.Popup({closeOnClick: false})
        .setLngLat([0.023483, 51.494294])
        .setHTML('<h1><p> Welcome to this visualisation of the regeneration at the London Docklands. Scroll through the right hand pane to travel across the area and discover the events leading up to the current climate. Click or hover over the pins to see photographs of the specific areas. </p></h1>')
        .addTo(map);
    
    map.on('load', function() {

var geojson = {
   "type": "FeatureCollection",
   "features": [
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [-0.017, 51.497]
    },
    "properties": {
    "ID":1,
    "Event":"Isle of Dogs (then)",
    "image":"<img src=\"images/isle-of-dogs-then.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [-0.017, 51.496]

    },
    "properties": {
    "ID":2,
    "Event":"Isle of Dogs (now)",
    "image":"<img src=\"images/isle-of-dogs-now.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ -0.023, 51.508 ] 	

    },
    "properties": {
    "ID":3,
    "Event":"Canary Wharf (then)",
    "image":"<img src=\"images/canary-then.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ -0.023, 51.506 ]

    },
    "properties": {
    "ID":4,
    "Event":"Canary Wharf (now)",
    "image":"<img src=\"images/canary-now.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.053, 51.506 ]
    },
    "properties": {
    "ID":5,
    "Event":"London City Airport (then)",
    "image":"<img src=\"images/george-then.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.053, 51.505]

    },
    "properties": {
    "ID":6,
    "Event":"London City Airport (now)",
    "image":"<img src=\"images/george-now.jpg\" >",
    "icon":"\"pin\""
    }
  },
    {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.064716, 51.507297 ]
    },
    "properties": {
    "ID":7,
    "Event":"University of East London",
    "image":"<img src=\"images/uni-of-east-london.jpg\" >",
    "icon":"\"pin\""
    }
  },     
       
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [0.006,51.513] 
    },
    "properties": {
    "ID":8,
    "Event":"London City Island (then)",
    "image":"<img src=\"images/island-then.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.006, 51.512 ]
    },
    "properties": {
    "ID":9,
    "Event":"London City Island (now)",
    "image":"<img src=\"images/island-now.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.029316, 51.508195 ]
    },
    "properties": {
    "ID":10,
    "Event":"ExCeL Centre",
    "image":"<img src=\"images/excel.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.023184, 51.5017 ]
    },
    "properties": {
    "ID":11,
    "Event":"Silvertown Quays",
    "image":"<img src=\"images/silvertown.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.011,51.503 ]   
    },
    "properties": {
    "ID":12,
    "Event":"Emirates Air Line",
    "image":"<img src=\"images/emirates.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [0.013, 51.497]
    },
    "properties": {
    "ID":13,
    "Event":"Housing Developments",
    "image":"<img src=\"images/housing.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.03943, 51.499 ]
    },
    "properties": {
    "ID":14,
    "Event":"Industrial Land Use (then)",
    "image":"<img src=\"images/industry-then.jpg\" >",
    "icon":"\"pin\""
    }
  },
{
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.0395, 51.498 ]
    },
    "properties": {
    "ID":15,
    "Event":"Industrial Land Use (now)",
    "image":"<img src=\"images/industry-now.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ -0.019,  51.503 ]  
    },
    "properties": {
    "ID":16,
    "Event":"Jubilee Place Shopping Mall",
    "image":"<img src=\"images/shopping.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.002, 51.478 ]  
    },
    "properties": {
    "ID":17,
    "Event":"Open Space",
    "image":"<img src=\"images/park.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ -0.010684, 51.502829 ]
    },
    "properties": {
    "ID":18,
    "Event":"Wood Wharf Proposed Development",
    "image":"<img src=\"images/wood.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ -0.013122, 51.509509 ]
    },
    "properties": {
    "ID":19,
    "Event":"North Quay Proposed Development",
    "image":"<img src=\"images/north-q.jpg\" >",
    "icon":"\"pin\""
    }
  },
  {
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.004,51.502 ]
    },
    "properties": {
    "ID":20,
    "Event":"o2 Arena (then)",
    "image":"<img src=\"images/o2-then.jpg\" >",
    "icon":"\"pin\""
    }
  },
{
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ 0.004,51.503 ]
    },
    "properties": {
    "ID":20,
    "Event":"o2 Arena (now)",
    "image":"<img src=\"images/o2-now.jpg\" >",
    "icon":"\"pin\""
    }
  },
{
    "type": "Feature",
    "geometry": {
       "type": "Point",
       "coordinates":  [ -0.008,51.508 ]  
    },
    "properties": {
    "ID":20,
    "Event":"DLR",
    "image":"<img src=\"images/DLR.jpg\" >",
    "icon":"\"pin\""
    }
  }
]};

        // add markers to map
    geojson.features.forEach(function(marker) {

  var popup = new mapboxgl.Popup()
    .setHTML( marker.properties.Event + marker.properties.image);

  // create a HTML element for each feature
  var el = document.createElement('div');
  el.className = 'marker';

  // make a marker for each feature and add to the map
  const myMarker = new mapboxgl.Marker(el, {
        offset: [0, -25]
    })
    .setLngLat(marker.geometry.coordinates)
    .setPopup(popup)
    .addTo(map);

        
        // https://docs.mapbox.com/help/tutorials/custom-markers-gl-js/ 
        
  const markerDiv = myMarker.getElement();  

  markerDiv.addEventListener('mouseenter', () => myMarker.togglePopup());
  markerDiv.addEventListener('mouseleave', () => myMarker.togglePopup());
  });


});
                         
var chapters = {
'INTRO': {
  center: [0.011390, 51.496807],
  zoom: 13.35, 
  bearing: 13.6,
  pitch: 62
},
'PreDevelopment': {
bearing: 11.2,
center: [0.023483, 51.494294] ,
zoom: 12.91,
pitch: 40,
speed: 0.3
},
'Declining': {
center: [ 0.385031, 51.45005 ] ,
bearing: 11.2,
zoom: 12,
pitch: 2,
speed: 0.2
},
'LDDC': {
bearing: 12,
center: [ 0.018, 51.497 ],
zoom: 13,
speed: 0.6,
pitch: 55
},
'EZ': {
bearing: 0,
center: [ -0.014, 51.492 ],
zoom: 14.72,
speed: 0.4,
pitch: 52.5
},
'DLR': {
bearing: -35.13,
center: [-0.012881,51.511505],
zoom: 15.17,
pitch: 32.53,
speed: 0.5
},
'Airport': {
bearing: -147.67,
center: [ 0.056336, 51.505198 ],
zoom: 15.14,
speed: 0.5,
pitch: 58.13
},
'CanaryWharf': {
bearing: -36.00,
center: [ -0.018779, 51.505243 ],
zoom: 15.88,
pitch: 67.00,
speed: 0.5
},
'University': {
bearing: 21.60,
center: [ 0.064716, 51.507297 ],
zoom: 15.88,
pitch: 62.00,
speed: 0.5
}, 
'Dome': {
bearing: 33.6,
center: [ 0.004094, 51.502675 ],
zoom: 15.88,
pitch: 53.5,
speed: 0.5
},    
'ExCeL': {
bearing: 22.4,
center: [ 0.029316, 51.508195 ],
zoom: 15.66,
pitch: 62,
speed: 0.5
},
'Silvertown': {
bearing: -40.06,
center: [ 0.023184, 51.5017 ],
zoom: 14.95,
pitch: 55.5,
speed: 0.5
},  
'Emirates': {
bearing: -32,
center: [ 0.013956, 51.504051 ],
zoom: 15.09,
pitch: 66.5,
speed: 0.5
},
'Housing': {
bearing: 0,
center: [ 0.033962, 51.483997 ],
zoom: 14.47,
pitch: 41.45,
speed: 0.5
},
'Industry': {
bearing: -140.72,
center: [ 0.03943, 51.498694 ],
zoom: 14.7,
pitch: 51.03,
speed: 0.5
},
'Shopping': {
bearing: 43.84,
center: [ 0.020701, 51.487502 ],
zoom: 15.4,
pitch: 44.41,
speed: 0.5
},
'Park': {
bearing: 0,
center: [ 0.029271, 51.485604 ],
zoom: 12.58,
pitch: 21.5,
speed:0.5
},
'Wood': {
bearing: -14.18,
center: [ -0.010684, 51.502829 ],
zoom: 16.75,
pitch: 58.29,
speed: 0.5
},
'NorthQ': {
bearing: -36.8,
center: [ -0.013122, 51.509509 ],
zoom: 15.79,
pitch: 58.29,
speed: 0.5
},
'Anything': {
bearing: 11.2,
center: [0.023483, 51.494294] ,
zoom: 12.91,
pitch: 40,
speed: 0.3
}
};
 
// On every scroll event, check which element is on screen
window.onscroll = function() {
var chapterNames = Object.keys(chapters);
for (var i = 0; i < chapterNames.length; i++) {
var chapterName = chapterNames[i];
if (isElementOnScreen(chapterName)) {
setActiveChapter(chapterName);
break;
}
}
};
 
var activeChapterName = 'INTRO';
function setActiveChapter(chapterName) {
if (chapterName === activeChapterName) return;
 
map.flyTo(chapters[chapterName]);
 
document.getElementById(chapterName).setAttribute('class', 'active');
document.getElementById(activeChapterName).setAttribute('class', '');
 
activeChapterName = chapterName;
}
 
function isElementOnScreen(id) {
var element = document.getElementById(id);
var bounds = element.getBoundingClientRect();
console.log(bounds);
return bounds.top < window.innerHeight && bounds.bottom > 0;
}   
    
map.addControl(new mapboxgl.FullscreenControl({container: document.querySelector('body') + document.querySelector('section')}));
    
map.addControl(new mapboxgl.NavigationControl());

    
</script>

</body>
</html>

    
    
    
    
    
    
    